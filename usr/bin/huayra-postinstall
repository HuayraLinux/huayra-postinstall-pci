#!/bin/bash

scripts=$(dirname $(readlink -f $0))

usage() {
    echo "Modo de uso: $0 [-r] [-t]"
    echo ""
    echo "El parámetro -r realiza modificaciones a los archivos. Con lo cual,"
    echo "debe utilizarlo cuando esté seguro de lo que está haciendo"
    echo ""
    echo "El parametro -t lo puede usar para probar que acciones se van a ejecutar."
    echo "En este caso, no se ejecuta ninga accion y no se modifica ningun archivo" 1>&2
    exit 1
}

cmd=""
while getopts ":rt" o; do
    case "${o}" in
    	r)
            echo "run"
	    cmd="run"
            ;;
	*)
            usage
            ;;
    esac
done
if [ -z "$cmd" ] ; then
    usage
fi
shift $((OPTIND-1))
run-parts --report --exit-on-error $scripts/../share/huayra-postinstall-pci/2014.d -a $cmd
